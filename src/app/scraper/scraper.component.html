<div *ngIf="(!scrapeRequestSubmitted && !scrapeResponseReceived)">
    <form [formGroup]="scrapeRequestForm" (submit)="sendScrapeRequest()">
        <mat-form-field>
            <mat-label>URL</mat-label>
            <input matInput formControlName="scrapeUrl">
        </mat-form-field>

        <button mat-raised-button type="submit">Submit</button>
    </form>
</div>

<div *ngIf="(scrapeRequestSubmitted && !scrapeResponseReceived)">
    Just give us a ding dang minute please we're working on it
</div>

<div *ngIf="scrapeResponseReceived">

    <form [formGroup]="recipePayload" (submit)="sendInsertRequest()">
        <mat-form-field>
            <mat-label>Title</mat-label>
            <textarea matInput cdkTextareaAutosize #autosize="cdkTextareaAutosize" cdkAutosizeMinRows="1"
                cdkAutosizeMaxRows="5" formControlName="title">{{recipePayload.get('title')?.value}}</textarea>
        </mat-form-field>

        <mat-form-field>
            <mat-label>Categories</mat-label>
            <textarea matInput cdkTextareaAutosize #autosize="cdkTextareaAutosize" cdkAutosizeMinRows="1"
                cdkAutosizeMaxRows="5"
                formControlName="categories">{{recipePayload.get('categories')?.value}}</textarea>
        </mat-form-field>

        <mat-form-field>
            <mat-label>Diet</mat-label>
            <textarea matInput cdkTextareaAutosize #autosize="cdkTextareaAutosize" cdkAutosizeMinRows="1"
                cdkAutosizeMaxRows="5" formControlName="diet">{{recipePayload.get('diet')?.value}}</textarea>
        </mat-form-field>

        <mat-form-field>
            <mat-label>Protein</mat-label>
            <textarea matInput cdkTextareaAutosize #autosize="cdkTextareaAutosize" cdkAutosizeMinRows="1"
                cdkAutosizeMaxRows="5" formControlName="protein">{{recipePayload.get('protein')?.value}}</textarea>
        </mat-form-field>

        <mat-form-field>
            <mat-label>Yield</mat-label>
            <textarea matInput cdkTextareaAutosize #autosize="cdkTextareaAutosize" cdkAutosizeMinRows="1"
                cdkAutosizeMaxRows="5" formControlName="yield">{{recipePayload.get('yield')?.value}}</textarea>
        </mat-form-field>

        <mat-form-field>
            <mat-label>Prep Time</mat-label>
            <textarea matInput cdkTextareaAutosize #autosize="cdkTextareaAutosize" cdkAutosizeMinRows="1"
                cdkAutosizeMaxRows="5" formControlName="prepTime">{{recipePayload.get('prepTime')?.value}}</textarea>
        </mat-form-field>

        <mat-form-field>
            <mat-label>Cook Time</mat-label>
            <textarea matInput cdkTextareaAutosize #autosize="cdkTextareaAutosize" cdkAutosizeMinRows="1"
                cdkAutosizeMaxRows="5" formControlName="cookTime">{{recipePayload.get('cookTime')?.value}}</textarea>
        </mat-form-field>

        <mat-form-field>
            <mat-label>Total Time</mat-label>
            <textarea matInput cdkTextareaAutosize #autosize="cdkTextareaAutosize" cdkAutosizeMinRows="1"
                cdkAutosizeMaxRows="5" formControlName="totalTime">{{recipePayload.get('totalTime')?.value}}</textarea>
        </mat-form-field>

        <mat-form-field>
            <mat-label>Picture URL</mat-label>
            <textarea matInput cdkTextareaAutosize #autosize="cdkTextareaAutosize" cdkAutosizeMinRows="1"
                cdkAutosizeMaxRows="5"
                formControlName="pictureUrl">{{recipePayload.get('pictureUrl')?.value}}</textarea>
        </mat-form-field>

        <ng-container formArrayName="ingredients">
            <ng-container *ngFor="let ing of this.ingredients.value; let i = index">
                <div [formGroupName]="i">
                    <mat-form-field>
                        <mat-label>Qty</mat-label>
                        <textarea matInput cdkTextareaAutosize #autosize="cdkTextareaAutosize" cdkAutosizeMinRows="1"
                            cdkAutosizeMaxRows="5" formControlName="qty"
                            id="{{'qty'+i}}">{{ing.qty}}</textarea>
                    </mat-form-field>

                    <mat-form-field>
                        <mat-label>Unit</mat-label>
                        <textarea matInput cdkTextareaAutosize #autosize="cdkTextareaAutosize" cdkAutosizeMinRows="1"
                            cdkAutosizeMaxRows="5" formControlName="unit"
                            id="{{'unit'+i}}">{{ing.unit}}</textarea>
                    </mat-form-field>

                    <mat-form-field>
                        <mat-label>Item</mat-label>
                        <textarea matInput cdkTextareaAutosize #autosize="cdkTextareaAutosize" cdkAutosizeMinRows="1"
                            cdkAutosizeMaxRows="5" formControlName="item" id="{{'item'+i}}">{{ing.item}}</textarea>
                    </mat-form-field>
                </div>
            </ng-container>
        </ng-container>


        <mat-form-field>
            <mat-label>Directions</mat-label>
            <textarea matInput cdkTextareaAutosize #autosize="cdkTextareaAutosize"
                cdkAutosizeMinRows="5">{{recipePayload.get('directions')?.value}}</textarea>
        </mat-form-field>

        <mat-form-field>
            <mat-label>Image File Name</mat-label>
            <textarea matInput cdkTextareaAutosize #autosize="cdkTextareaAutosize" cdkAutosizeMinRows="1"
                cdkAutosizeMaxRows="5">{{recipePayload.get('fileName')?.value}}</textarea>
        </mat-form-field>

        <mat-form-field>
            <mat-label>Image Base 64 File Name</mat-label>
            <textarea matInput cdkTextareaAutosize #autosize="cdkTextareaAutosize" cdkAutosizeMinRows="1"
                cdkAutosizeMaxRows="5">{{recipePayload.get('base64FileName')?.value}}</textarea>
        </mat-form-field>

        <mat-form-field>
            <mat-label>Image URL</mat-label>
            <textarea matInput cdkTextareaAutosize #autosize="cdkTextareaAutosize" cdkAutosizeMinRows="1"
                cdkAutosizeMaxRows="5">{{recipePayload.get('url')?.value}}</textarea>
        </mat-form-field>

        <mat-form-field>
            <mat-label>Image Local Path</mat-label>
            <textarea matInput cdkTextareaAutosize #autosize="cdkTextareaAutosize" cdkAutosizeMinRows="1"
                cdkAutosizeMaxRows="5">{{recipePayload.get('localPath')?.value}}</textarea>
        </mat-form-field>

        <button mat-raised-button type="submit">Submit</button>
    </form>

</div>